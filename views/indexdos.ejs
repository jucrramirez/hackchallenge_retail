<html>
	<head>
	  <meta charset="utf-8" /> 
	  <!-- Plotly.js -->
	  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Estilos -->
	<style>
	#volPais {
		float:right
	}
	body {
		font-family: Arial,Helvetica,sans-serif;
	}
	.column {
		float: left;
		width: 50%;
	}
	.row:after {
		content: "";
		display: table;
		clear: both;
	}	
	#banner {
	  position: absolute;
	  top: 0px;
	  left: 0px;
	  right: 0px;
	  width: 100%;
	  height: 113px;
	  z-index: -1;
	}
	#content {
		padding-top: 113px;
		margin-left:100px;
		margin-right:100px;
	}	
	.esconder {
		display:none;
	}
	</style>
</head>
<body>
  <img id="banner" src="http://www.iingen.unam.mx/SiteCollectionImages/banner.gif" alt="Banner Image"/>
	  <div id="content">
		  <h1 style="text-align:center">Observatorio de la opinión</h1>
       	  <h2>Línea del tiempo</h2>			
		  <div id="fechas"><!-- Plotly chart will be drawn inside this DIV --></div>
	  </div>
</body>
	
	<script>
		var fechas = []
		var NconteoAnaya = []
		var NconteoZavala = []
		var NconteoPatricio = []
		var NconteoCalderon = []
		var NconteoAMLO = []
		var NconteoMeade = []
		//hasta aquí temrinamos con resultVolumen, seguimos con resultFechas
		//resultFechas es una lista que contiene listas. En el for cada J es una fecha (filas), y cada I es la fecha, y el
		//conteo por candidato (columnas)
		var resultFechas = <%- JSON.stringify(resultFechas) %>
		//aquí se mete en cada lista, los valores que necesitamos de los conteos para graficar.
		//las j's corresponden con el orden en que están los datos metidos en el arreglo resultFechas
		for (var j=0; j<resultFechas.length; j++) {
			for (var i=0; i<resultFechas[j].length; i++) {
				if (j==0){
					fechas.push(resultFechas[j][i])
				};
				if (j==1) {
					NconteoAnaya.push(resultFechas[j][i])
				};
				if (j==2) {
					NconteoZavala.push(resultFechas[j][i])
				};
				if (j==3) {
					NconteoPatricio.push(resultFechas[j][i])
				};
				if (j==4) {
					NconteoCalderon.push(resultFechas[j][i])
				};
				if (j==5) {
					NconteoAMLO.push(resultFechas[j][i])
				};
				if (j==6) {
					NconteoMeade.push(resultFechas[j][i])
				};
			};
		};
		var traceAMLO = {
		  type: "scatter",
		  mode: "lines",
		  name: 'Andrés Manuel López Obrador',
		  x: fechas,
		  y: NconteoAMLO,
		  line: {color: '#B5261E'}
		}
		var traceZavala = {
		  type: "scatter",
		  mode: "lines",
		  name: 'Margarita Zavala',
		  x: fechas,
		  y: NconteoZavala,
		  line: {color: '#402C67'}
		}
		var traceMeade = {
		  type: "scatter",
		  mode: "lines",
		  name: 'José Antonio Meade',
		  x: fechas,
		  y: NconteoMeade,
		  line: {color: '#FF1013'}
		}
		var traceAnaya = {
		  type: "scatter",
		  mode: "lines",
		  name: 'Ricardo Anaya',
		  x: fechas,
		  y: NconteoAnaya,
		  line: {color: '#06338E'}
		}
		var traceCalderon = {
		  type: "scatter",
		  mode: "lines",
		  name: 'Jaime Rodríguez',
		  x: fechas,
		  y: NconteoCalderon,
		  line: {color: '#000000'}
		}
		var data = [traceAMLO,traceZavala,traceMeade,traceAnaya,traceCalderon]
		Plotly.newPlot('fechas', data);
		
	</script>
</html>
